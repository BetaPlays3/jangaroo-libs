<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../../style.css" type="text/css" media="screen">
<link rel="stylesheet" href="../../print.css" type="text/css" media="print">
<meta content="SoundLoaderContext,flash.media.SoundLoaderContext,bufferTime,checkPolicyFile" name="keywords">
<title>flash.media.SoundLoaderContext</title>
</head>
<body>
<script type="text/javascript" language="javascript" src="../../asdoc.js"></script><script type="text/javascript" language="javascript" src="../../cookies.js"></script><script type="text/javascript" language="javascript">
<!--
				asdocTitle = 'SoundLoaderContext - API Documentation';
				var baseRef = '../../';
				window.onload = configPage;
			--></script>
<table style="display:none" id="titleTable" cellspacing="0" cellpadding="0" class="titleTable">
<tr>
<td align="left" class="titleTableTitle">API Documentation</td><td align="right" class="titleTableTopNav"><a onclick="loadClassListFrame('../../all-classes.html')" href="../../package-summary.html">All&nbsp;Packages</a>&nbsp;|&nbsp;<a onclick="loadClassListFrame('../../all-classes.html')" href="../../class-summary.html">All&nbsp;Classes</a>&nbsp;|&nbsp;<a onclick="loadClassListFrame('../../index-list.html')" href="../../all-index-A.html">Index</a>&nbsp;|&nbsp;<a href="../../index.html?flash/media/SoundLoaderContext.html&amp;flash/media/class-list.html" id="framesLink1">Frames</a><a onclick="parent.location=document.location" href="" style="display:none" id="noFramesLink1">No&nbsp;Frames</a></td><td rowspan="3" align="right" class="titleTableLogo"><img alt="Adobe Logo" title="Adobe Logo" class="logoImage" src="../../images/logo.jpg"></td>
</tr>
<tr class="titleTableRow2">
<td align="left" id="subTitle" class="titleTableSubTitle">Class&nbsp;SoundLoaderContext</td><td align="right" id="subNav" class="titleTableSubNav"><a href="#propertySummary">Properties</a>&nbsp;| <a href="#methodSummary">Methods</a></td>
</tr>
<tr class="titleTableRow3">
<td colspan="2">&nbsp;</td>
</tr>
</table>
<script type="text/javascript" language="javascript">
<!--
if (!isEclipse() || window.name != ECLIPSE_FRAME_NAME) {titleBar_setSubTitle("ClassÂ SoundLoaderContext"); titleBar_setSubNav(false,true,false,false,false,false,true,false,false,false,false,false,false,false);}
--></script>
<div class="MainContent">
<table cellspacing="0" cellpadding="0" class="classHeaderTable">
<tr>
<td class="classHeaderTableLabel">Package</td><td><a onclick="javascript:loadClassListFrame('class-list.html')" href="package-detail.html">flash.media</a></td>
</tr>
<tr>
<td class="classHeaderTableLabel">Class</td><td class="classSignature">public class SoundLoaderContext</td>
</tr>
</table>
<p></p>
 The SoundLoaderContext class provides security checks for files that load sound. SoundLoaderContext objects are passed as an argument to the constructor and the <code>load()</code> method of the Sound class.
 <p>When you use this class, consider the following security model:</p>
 <ul>
 <li>Loading and playing a sound is not allowed if the calling file is in a network sandbox and the sound file to be loaded is local.</li>
 <li>By default, loading and playing a sound is not allowed if the calling is local and tries to load and play a remote sound. A user must grant explicit permission to allow this.</li>
 <li>Certain operations dealing with sound are restricted. The data in a loaded sound cannot be accessed by a file in a different domain unless you implement a URL policy file. Sound-related APIs that fall under this restriction are the <code>Sound.id3</code> property and the <code>SoundMixer.computeSpectrum()</code>, <code>SoundMixer.bufferTime</code>, and <code>SoundTransform()</code> methods.</li></ul>
 <p>However, in Adobe AIR, content in the <code>application</code> security sandbox (content installed with the AIR application) are not restricted by these security limitations.</p>
 <p>For more information related to security, see the Flash Player Developer Center Topic: <a href="http://www.adobe.com/go/devnet_security_en">Security</a>.</p>
 <p></p>
<br>
<hr>
</div>
<a name="propertySummary"></a>
<div class="summarySection">
<div class="summaryTableTitle">Public Properties</div>
<table id="summaryTableProperty" class="summaryTable " cellpadding="3" cellspacing="0">
<tr>
<th>&nbsp;</th><th colspan="2">Property</th><th class="summaryTableOwnerCol">Defined&nbsp;by</th>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol"><a class="signatureLink" href="#bufferTime">bufferTime</a> : Number = 1000<div class="summaryTableDescription">
   The number of milliseconds to preload a streaming sound into a buffer before the sound starts to stream.</div>
</td><td class="summaryTableOwnerCol">SoundLoaderContext</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol"><a class="signatureLink" href="#checkPolicyFile">checkPolicyFile</a> : Boolean = false<div class="summaryTableDescription">
   Specifies whether the application should try to download a URL policy file from the loaded sound's server before beginning to load the sound.</div>
</td><td class="summaryTableOwnerCol">SoundLoaderContext</td>
</tr>
</table>
</div>
<a name="methodSummary"></a>
<div class="summarySection">
<div class="summaryTableTitle">Public Methods</div>
<table id="summaryTableMethod" class="summaryTable " cellpadding="3" cellspacing="0">
<tr>
<th>&nbsp;</th><th colspan="2">Method</th><th class="summaryTableOwnerCol">Defined&nbsp;by</th>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#SoundLoaderContext()">SoundLoaderContext</a>(bufferTime:Number = 1000, checkPolicyFile:Boolean = false)</div>
<div class="summaryTableDescription">
   Creates a new sound loader context object.</div>
</td><td class="summaryTableOwnerCol">SoundLoaderContext</td>
</tr>
</table>
</div>
<script type="text/javascript" language="javascript">
<!--
showHideInherited();
--></script>
<div class="MainContent">
<a name="propertyDetail"></a>
<div class="detailSectionHeader">Property detail</div>
<a name="bufferTime"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">bufferTime</td><td class="detailHeaderType">property</td>
</tr>
</table>
<div class="detailBody">
<code>public var bufferTime:Number = 1000</code><p>
   The number of milliseconds to preload a streaming sound into a buffer before the sound starts to stream.
   </p><p>Note that you cannot override the value of <code>SoundLoaderContext.bufferTime</code> by setting the global <code>SoundMixer.bufferTime</code> property. The <code>SoundMixer.bufferTime</code> property affects the buffer time for embedded streaming sounds in a SWF file and is independent of dynamically created Sound objects (that is, Sound objects created in ActionScript).</p>
   </div>
<a name="checkPolicyFile"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">checkPolicyFile</td><td class="detailHeaderType">property</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public var checkPolicyFile:Boolean = false</code><p>
   Specifies whether the application should try to download a URL policy file from the loaded sound's server before beginning to load the sound. This property applies to sound that is loaded from outside the calling file's own domain using the <code>Sound.load()</code> method.
   </p><p>Set this property to <code>true</code> when you load a sound from outside the calling file's own domain and code in the calling file needs low-level access to the sound's data. Examples of low-level access to a sound's data include referencing the <code>Sound.id3</code> property to get an ID3Info object or calling the <code>SoundMixer.computeSpectrum()</code> method to get sound samples from the loaded sound. If you try to access sound data without setting the <code>checkPolicyFile</code> property to <code>true</code> at loading time, you may get a SecurityError exception because the required policy file has not been downloaded.</p>
   <p>If you don't need low-level access to the sound data that you are loading, avoid setting <code>checkPolicyFile</code> to <code>true</code>. Checking for a policy file consumes network bandwidth and might delay the start of your download, so it should only be done when necessary.</p>
   <p>When you call <code>Sound.load()</code> with <code>SoundLoaderContext.checkPolicyFile</code> set to <code>true</code>, Flash Player or AIR must either successfully download a relevant URL policy file or determine that no such policy file exists before it begins downloading the specified sound. Flash Player or AIR performs the following actions, in this order, to verify the existence of a policy file:</p>
   <ul>
   <li>Flash Player or AIR considers policy files that have already been downloaded.</li>
   <li>Flash Player or AIR tries to download any pending policy files specified in calls to <code>Security.loadPolicyFile()</code>.</li>
   <li>Flash Player or AIR tries to download a policy file from the default location that corresponds to the sound's URL, which is <code>/crossdomain.xml</code> on the same server as <code>URLRequest.url</code>. (The sound's URL is specified in the <code>url</code> property of the URLRequest object passed to <code>Sound.load()</code> or the Sound() constructor function.)</li></ul>
   <p>In all cases, Flash Player or AIR requires that an appropriate policy file exist on the sound's server, that it provide access to the sound file at <code>URLRequest.url</code> by virtue of the policy file's location, and that it allow the domain of the calling file to access the sound, through one or more <code><allow-access-from></code> tags.</p>
   <p>If you set <code>checkPolicyFile</code> to <code>true</code>, Flash Player or AIR waits until the policy file is verified before loading the sound. You should wait to perform any low-level operations on the sound data, such as calling <code>Sound.id3</code> or <code>SoundMixer.computeSpectrum()</code>, until <code>progress</code> and <code>complete</code> events are dispatched from the Sound object.</p>
   <p>If you set <code>checkPolicyFile</code> to <code>true</code> but no appropriate policy file is found, you will not receive an error until you perform an operation that requires a policy file, and then Flash Player or AIR throws a <code>SecurityError</code> exception. After you receive a <code>complete</code> event, you can test whether a relevant policy file was found by getting the value of <code>Sound.id3</code> within a <code>try</code> block and seeing if a <code>SecurityError</code> is thrown.</p>
   <p>Be careful with <code>checkPolicyFile</code> if you are downloading sound from a URL that uses server-side HTTP redirects. Flash Player or AIR tries to retrieve policy files that correspond to the <code>url</code> property of the URLRequest object passed to <code>Sound.load()</code>. If the final sound file comes from a different URL because of HTTP redirects, then the initially downloaded policy files might not be applicable to the sound's final URL, which is the URL that matters in security decisions.</p>
   <p>If you find yourself in this situation, here is one possible solution. After you receive a <code>progress</code> or <code>complete</code> event, you can examine the value of the <code>Sound.url</code> property, which contains the sound's final URL. Then call the <code>Security.loadPolicyFile()</code> method with a policy file URL that you calculate based on the sound's final URL. Finally, poll the value of <code>Sound.id3</code> until no exception is thrown.</p>
   <p>This does not apply to content in the AIR application sandbox. Content in the application sandbox always has programatic access to sound content, regardless of its origin.</p>
   <p>For more information related to security, see the Flash Player Developer Center Topic: <a href="http://www.adobe.com/go/devnet_security_en">Security</a>.</p>
   <p>
<span class="label">See also</span>
</p>
<div class="seeAlso">
<a href="Sound.html#load()" target="">Sound.load()</a>
<br>
<a href="Sound.html#id3" target="">Sound.id3</a>
<br>
<a href="SoundMixer.html#computeSpectrum()" target="">SoundMixer.computeSpectrum()</a>
<br>
<a href="Sound.html#url" target="">Sound.url</a>
<br>
<a href="../system/Security.html#loadPolicyFile()" target="">flash.system.Security.loadPolicyFile()</a>
<br>
<a href="http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e13.html" target="mm_external">Loading display content dynamically</a>
<br>
<a href="http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7de0.html" target="mm_external">Specifying loading context</a>
</div>
</div>
<a name="constructorDetail"></a>
<div class="detailSectionHeader">Constructor detail</div>
<a name="SoundLoaderContext()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">SoundLoaderContext</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">constructor</td>
</tr>
</table>
<div class="detailBody">
<code>public function SoundLoaderContext(bufferTime:Number = 1000, checkPolicyFile:Boolean = false)</code><p>
   Creates a new sound loader context object.
   </p><span class="label">Parameters</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20px"></td><td><code><span class="label">bufferTime</span>:Number</code> (default = <code>1000</code>)<code></code> &mdash; The number of seconds to preload a streaming sound into a buffer before the sound starts to stream.
   </td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">checkPolicyFile</span>:Boolean</code> (default = <code>false</code>)<code></code> &mdash; Specifies whether the existence of a URL policy file should be checked upon loading the object (<code>true</code>) or not.
      </td>
</tr>
</table>
<br>
<span class="label">Example</span>
<br>In the following example, the buffer for the sound that will be loaded is set to three seconds.
   <p>The first parameter of a SoundLoaderContext object (<code>context</code>) is used to increase the default buffer value of one second to three seconds. (The value is in milliseconds.) If the second parameter of the SoundLoaderContext object is set to <code>true</code>, Flash Player will check for a cross-domain policy file upon loading the object. Here it is set to the default value <code>false</code>, so no policy file will be checked. The <code>load()</code> method of the sound object will use the context setting to make sure it will take three seconds to preload the streaming sound into a buffer before the sound starts to stream. The <code>URLRequest</code> object determines the location of the file, which is a podcast from Adobe. If an <code>IOErrorEvent.IO_ERROR</code> error occurs during the loading of the sound file, the <code>errorHandler()</code> method is invoked.</p>
   <div class='listing'><pre>
   package {
       import flash.display.Sprite;
       import flash.net.URLRequest;
       import flash.media.Sound;
       import flash.media.SoundLoaderContext;
       import flash.events.IOErrorEvent;
          public class SoundLoaderContextExample extends Sprite {
              public function SoundLoaderContextExample() {
               var snd:Sound = new Sound();
               var req:URLRequest = new URLRequest("http://av.adobe.com/podcast/csbu_dev_podcast_epi_2.mp3");
               var context:SoundLoaderContext = new SoundLoaderContext(3000, false);
                  snd.load(req, context);
               snd.play();
                  snd.addEventListener(IOErrorEvent.IO_ERROR, errorHandler);
           }
              private function errorHandler(errorEvent:IOErrorEvent):void {
               trace("The sound could not be loaded: " + errorEvent.text);
           }
          }
   }
   </pre></div>
   <p></p>
</div>
<br>
<br>
<hr>
<br>
<p></p>
<center class="copyright"> 
</center>
</div>
</body>
</html>
<!-- -->
